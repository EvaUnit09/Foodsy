> Task :compileJava
> Task :processResources UP-TO-DATE
> Task :classes
> Task :resolveMainClassName

> Task :bootRun

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.0)

2025-07-06T20:02:56.154-04:00  INFO 11609 --- [backend] [           main] c.f.backend.BackendApplication           : Starting BackendApplication using Java 21.0.7 with PID 11609 (/Users/DecaiNW1/IdeaProjects/foodiefriends/backend/build/classes/java/main started by DecaiNW1 in /Users/DecaiNW1/IdeaProjects/foodiefriends/backend)
2025-07-06T20:02:56.155-04:00  INFO 11609 --- [backend] [           main] c.f.backend.BackendApplication           : No active profile set, falling back to 1 default profile: "default"
2025-07-06T20:02:56.414-04:00  INFO 11609 --- [backend] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-06T20:02:56.438-04:00  INFO 11609 --- [backend] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 21 ms. Found 7 JPA repository interfaces.
2025-07-06T20:02:56.653-04:00  INFO 11609 --- [backend] [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-07-06T20:02:56.659-04:00  INFO 11609 --- [backend] [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-07-06T20:02:56.659-04:00  INFO 11609 --- [backend] [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-07-06T20:02:56.683-04:00  INFO 11609 --- [backend] [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-07-06T20:02:56.683-04:00  INFO 11609 --- [backend] [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 514 ms
2025-07-06T20:02:56.753-04:00  INFO 11609 --- [backend] [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-06T20:02:56.775-04:00  INFO 11609 --- [backend] [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.15.Final
2025-07-06T20:02:56.786-04:00  INFO 11609 --- [backend] [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-07-06T20:02:56.885-04:00  INFO 11609 --- [backend] [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-06T20:02:56.895-04:00  INFO 11609 --- [backend] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-07-06T20:02:56.933-04:00  INFO 11609 --- [backend] [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@682266d8
2025-07-06T20:02:56.933-04:00  INFO 11609 --- [backend] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-07-06T20:02:56.957-04:00  INFO 11609 --- [backend] [           main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-06T20:02:57.302-04:00  INFO 11609 --- [backend] [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-06T20:02:57.381-04:00  INFO 11609 --- [backend] [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-06T20:02:57.645-04:00  INFO 11609 --- [backend] [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-06T20:02:57.959-04:00  WARN 11609 --- [backend] [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-06T20:02:58.253-04:00  INFO 11609 --- [backend] [           main] o.s.m.s.b.SimpleBrokerMessageHandler     : Starting...
2025-07-06T20:02:58.253-04:00  INFO 11609 --- [backend] [           main] o.s.m.s.b.SimpleBrokerMessageHandler     : BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@3fa695f5]]
2025-07-06T20:02:58.253-04:00  INFO 11609 --- [backend] [           main] o.s.m.s.b.SimpleBrokerMessageHandler     : Started.
2025-07-06T20:02:58.257-04:00  INFO 11609 --- [backend] [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-07-06T20:02:58.261-04:00  INFO 11609 --- [backend] [           main] c.f.backend.BackendApplication           : Started BackendApplication in 2.259 seconds (process running for 2.4)
2025-07-06T20:03:00.364-04:00  INFO 11609 --- [backend] [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-06T20:03:00.364-04:00  INFO 11609 --- [backend] [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-07-06T20:03:00.368-04:00  INFO 11609 --- [backend] [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
Hibernate: select u1_0.id,u1_0.avatar_url,u1_0.created_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.provider,u1_0.provider_id,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
Hibernate: select fa1_0.user_id,fa1_0.food_allergies from user_food_allergies fa1_0 where fa1_0.user_id=?
Hibernate: select dp1_0.user_id,dp1_0.dietary_preferences from user_dietary_preferences dp1_0 where dp1_0.user_id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 14, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 14, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 24, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 14, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 14, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 14, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 14, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 24, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
DEBUG: Found existing UserVoteQuota - ID: 24, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.join_code=?
Hibernate: insert into session (created_at,creator_id,join_code,likes_per_user,pool_size,round,round_time,status) values (?,?,?,?,?,?,?,?)
Hibernate: insert into session_restaurant (address,category,current_opening_hours,generative_summary,like_count,name,price_level,price_range,provider_id,rating,review_summary,round,session_id,user_rating_count) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
Hibernate: insert into session_restaurant (address,category,current_opening_hours,generative_summary,like_count,name,price_level,price_range,provider_id,rating,review_summary,round,session_id,user_rating_count) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
Hibernate: insert into session_restaurant (address,category,current_opening_hours,generative_summary,like_count,name,price_level,price_range,provider_id,rating,review_summary,round,session_id,user_rating_count) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
Hibernate: insert into session_restaurant (address,category,current_opening_hours,generative_summary,like_count,name,price_level,price_range,provider_id,rating,review_summary,round,session_id,user_rating_count) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
Hibernate: insert into session_participant (joined_at,session_id,user_id) values (?,?,?)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Creating new UserVoteQuota for sessionId: 15, userId: decainw1, round: 1
DEBUG: Session likesPerUser: 2, calculated maxVotes: 2 for round 1
Hibernate: insert into user_vote_quota (created_at,round,session_id,total_allowed,updated_at,user_id,votes_used) values (?,?,?,?,?,?,?)
DEBUG: Created UserVoteQuota with ID: 25, maxVotes: 2, votesUsed: 0, remaining: 2
DEBUG: User decainw1 has 2 remaining votes (used: 0/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 1
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 1
DEBUG: Found existing UserVoteQuota - ID: 25, maxVotes: 2, votesUsed: 0, remaining: 2
DEBUG: User decainw1 has 2 remaining votes (used: 0/2)
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 25, maxVotes: 2, votesUsed: 0, remaining: 2
DEBUG: User decainw1 has 2 remaining votes (used: 0/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
2025-07-06T20:03:47.563-04:00  INFO 11609 --- [backend] [nboundChannel-2] .s.a.AnnotationAsyncExecutionInterceptor : More than one TaskExecutor bean found within the context, and none is named 'taskExecutor'. Mark one of them as primary or name it 'taskExecutor' (possibly as an alias) in order to use it for async processing: [clientInboundChannelExecutor, clientOutboundChannelExecutor, brokerChannelExecutor, messageBrokerTaskScheduler]
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 25, maxVotes: 2, votesUsed: 0, remaining: 2
DEBUG: User decainw1 has 2 remaining votes (used: 0/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 25, maxVotes: 2, votesUsed: 0, remaining: 2
DEBUG: User decainw1 has 2 remaining votes (used: 0/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 25, maxVotes: 2, votesUsed: 0, remaining: 2
DEBUG: User decainw1 has 2 remaining votes (used: 0/2)
JWT Auth for vote request - User: decainw1, URI: /api/sessions/15/restaurants/ChIJz7d4K2VZwokRGOW9yyiNsck/vote
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
DEBUG: Vote endpoint called - sessionId: 15, providerId: ChIJz7d4K2VZwokRGOW9yyiNsck, principal: decainw1
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 1
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=?
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 25, maxVotes: 2, votesUsed: 0, remaining: 2
DEBUG: User decainw1 has 2 remaining votes (used: 0/2)
DEBUG: processVote called - sessionId: 15, userId: decainw1, providerId: ChIJz7d4K2VZwokRGOW9yyiNsck, voteType: LIKE, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 25, maxVotes: 2, votesUsed: 0, remaining: 2
DEBUG: Current quota before vote - votesUsed: 0, totalAllowed: 2, canVote: true
Hibernate: select svh1_0.id,svh1_0.created_at,svh1_0.provider_id,svh1_0.round,svh1_0.session_id,svh1_0.user_id,svh1_0.vote_type from session_vote_history svh1_0 where svh1_0.session_id=? and svh1_0.user_id=? and svh1_0.provider_id=? and svh1_0.round=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=?
DEBUG: Processing LIKE vote - incrementing quota
DEBUG: Quota after LIKE vote - votesUsed: 1, totalAllowed: 2
Hibernate: insert into session_vote_history (created_at,provider_id,round,session_id,user_id,vote_type) values (?,?,?,?,?,?)
DEBUG: Vote processed successfully
Hibernate: update session_restaurant set address=?,category=?,current_opening_hours=?,generative_summary=?,like_count=?,name=?,price_level=?,price_range=?,provider_id=?,rating=?,review_summary=?,round=?,session_id=?,user_rating_count=? where id=?
Hibernate: update user_vote_quota set created_at=?,round=?,session_id=?,total_allowed=?,updated_at=?,user_id=?,votes_used=? where id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 25, maxVotes: 2, votesUsed: 1, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 1/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 25, maxVotes: 2, votesUsed: 1, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 1/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 25, maxVotes: 2, votesUsed: 1, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 1/2)
2025-07-06T20:03:58.258-04:00  INFO 11609 --- [backend] [MessageBroker-1] o.s.w.s.c.WebSocketMessageBrokerStats    : WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 2 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(2)-CONNECTED(2)-DISCONNECT(1)], stompBrokerRelay[null], inboundChannel[pool size = 16, active threads = 0, queued tasks = 0, completed tasks = 21], outboundChannel[pool size = 16, active threads = 0, queued tasks = 0, completed tasks = 16], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 2, completed tasks = 12]
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 25, maxVotes: 2, votesUsed: 1, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 1/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 25, maxVotes: 2, votesUsed: 1, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 1/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 25, maxVotes: 2, votesUsed: 1, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 1/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 25, maxVotes: 2, votesUsed: 1, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 1/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 25, maxVotes: 2, votesUsed: 1, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 1/2)
JWT Auth for vote request - User: decainw1, URI: /api/sessions/15/restaurants/ChIJ3aKC18JZwokRV_edM73h9UI/vote
DEBUG: Vote endpoint called - sessionId: 15, providerId: ChIJ3aKC18JZwokRV_edM73h9UI, principal: decainw1
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 1
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 25, maxVotes: 2, votesUsed: 1, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 1/2)
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 1
DEBUG: processVote called - sessionId: 15, userId: decainw1, providerId: ChIJ3aKC18JZwokRV_edM73h9UI, voteType: LIKE, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 25, maxVotes: 2, votesUsed: 1, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 1/2)
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 25, maxVotes: 2, votesUsed: 1, remaining: 1
DEBUG: Current quota before vote - votesUsed: 1, totalAllowed: 2, canVote: true
Hibernate: select svh1_0.id,svh1_0.created_at,svh1_0.provider_id,svh1_0.round,svh1_0.session_id,svh1_0.user_id,svh1_0.vote_type from session_vote_history svh1_0 where svh1_0.session_id=? and svh1_0.user_id=? and svh1_0.provider_id=? and svh1_0.round=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=?
DEBUG: Processing LIKE vote - incrementing quota
DEBUG: Quota after LIKE vote - votesUsed: 2, totalAllowed: 2
Hibernate: insert into session_vote_history (created_at,provider_id,round,session_id,user_id,vote_type) values (?,?,?,?,?,?)
DEBUG: Vote processed successfully
Hibernate: update session_restaurant set address=?,category=?,current_opening_hours=?,generative_summary=?,like_count=?,name=?,price_level=?,price_range=?,provider_id=?,rating=?,review_summary=?,round=?,session_id=?,user_rating_count=? where id=?
Hibernate: update user_vote_quota set created_at=?,round=?,session_id=?,total_allowed=?,updated_at=?,user_id=?,votes_used=? where id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 25, maxVotes: 2, votesUsed: 2, remaining: 0
DEBUG: User decainw1 has 0 remaining votes (used: 2/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 25, maxVotes: 2, votesUsed: 2, remaining: 0
DEBUG: User decainw1 has 0 remaining votes (used: 2/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select count(sp1_0.id) from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=? order by sr1_0.like_count desc
Hibernate: insert into session_restaurant (address,category,current_opening_hours,generative_summary,like_count,name,price_level,price_range,provider_id,rating,review_summary,round,session_id,user_rating_count) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
Hibernate: insert into session_restaurant (address,category,current_opening_hours,generative_summary,like_count,name,price_level,price_range,provider_id,rating,review_summary,round,session_id,user_rating_count) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
Hibernate: insert into session_restaurant (address,category,current_opening_hours,generative_summary,like_count,name,price_level,price_range,provider_id,rating,review_summary,round,session_id,user_rating_count) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
Hibernate: update session set created_at=?,creator_id=?,join_code=?,likes_per_user=?,pool_size=?,round=?,round_time=?,status=? where id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 2
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Creating new UserVoteQuota for sessionId: 15, userId: decainw1, round: 2
DEBUG: Session likesPerUser: 2, calculated maxVotes: 1 for round 2
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
Hibernate: insert into user_vote_quota (created_at,round,session_id,total_allowed,updated_at,user_id,votes_used) values (?,?,?,?,?,?,?)
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 2
DEBUG: Created UserVoteQuota with ID: 26, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 26, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
Hibernate: select u1_0.id,u1_0.avatar_url,u1_0.created_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.provider,u1_0.provider_id,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
Hibernate: select fa1_0.user_id,fa1_0.food_allergies from user_food_allergies fa1_0 where fa1_0.user_id=?
Hibernate: select dp1_0.user_id,dp1_0.dietary_preferences from user_dietary_preferences dp1_0 where dp1_0.user_id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 26, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 2
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 26, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
DEBUG: Found existing UserVoteQuota - ID: 26, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
Timer already running for session 15 round 1, skipping duplicate
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 26, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 26, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 26, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 26, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 26, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
JWT Auth for vote request - User: decainw1, URI: /api/sessions/15/restaurants/ChIJz7d4K2VZwokRGOW9yyiNsck/vote
DEBUG: Vote endpoint called - sessionId: 15, providerId: ChIJz7d4K2VZwokRGOW9yyiNsck, principal: decainw1
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 2
DEBUG: processVote called - sessionId: 15, userId: decainw1, providerId: ChIJz7d4K2VZwokRGOW9yyiNsck, voteType: LIKE, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 26, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: Found existing UserVoteQuota - ID: 26, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: Current quota before vote - votesUsed: 0, totalAllowed: 1, canVote: true
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
Hibernate: select svh1_0.id,svh1_0.created_at,svh1_0.provider_id,svh1_0.round,svh1_0.session_id,svh1_0.user_id,svh1_0.vote_type from session_vote_history svh1_0 where svh1_0.session_id=? and svh1_0.user_id=? and svh1_0.provider_id=? and svh1_0.round=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=?
DEBUG: Processing LIKE vote - incrementing quota
DEBUG: Quota after LIKE vote - votesUsed: 1, totalAllowed: 1
Hibernate: insert into session_vote_history (created_at,provider_id,round,session_id,user_id,vote_type) values (?,?,?,?,?,?)
DEBUG: Vote processed successfully
Hibernate: update session_restaurant set address=?,category=?,current_opening_hours=?,generative_summary=?,like_count=?,name=?,price_level=?,price_range=?,provider_id=?,rating=?,review_summary=?,round=?,session_id=?,user_rating_count=? where id=?
Hibernate: update user_vote_quota set created_at=?,round=?,session_id=?,total_allowed=?,updated_at=?,user_id=?,votes_used=? where id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 26, maxVotes: 1, votesUsed: 1, remaining: 0
DEBUG: User decainw1 has 0 remaining votes (used: 1/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 26, maxVotes: 1, votesUsed: 1, remaining: 0
DEBUG: User decainw1 has 0 remaining votes (used: 1/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=? order by sr1_0.like_count desc
Hibernate: update session set created_at=?,creator_id=?,join_code=?,likes_per_user=?,pool_size=?,round=?,round_time=?,status=? where id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select u1_0.id,u1_0.avatar_url,u1_0.created_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.provider,u1_0.provider_id,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
Hibernate: select fa1_0.user_id,fa1_0.food_allergies from user_food_allergies fa1_0 where fa1_0.user_id=?
Hibernate: select dp1_0.user_id,dp1_0.dietary_preferences from user_dietary_preferences dp1_0 where dp1_0.user_id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 26, maxVotes: 1, votesUsed: 1, remaining: 0
DEBUG: User decainw1 has 0 remaining votes (used: 1/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 2
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 15, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 15, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 26, maxVotes: 1, votesUsed: 1, remaining: 0
DEBUG: Found existing UserVoteQuota - ID: 26, maxVotes: 1, votesUsed: 1, remaining: 0
DEBUG: User decainw1 has 0 remaining votes (used: 1/1)
DEBUG: User decainw1 has 0 remaining votes (used: 1/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.join_code=?
Hibernate: insert into session (created_at,creator_id,join_code,likes_per_user,pool_size,round,round_time,status) values (?,?,?,?,?,?,?,?)
Hibernate: insert into session_restaurant (address,category,current_opening_hours,generative_summary,like_count,name,price_level,price_range,provider_id,rating,review_summary,round,session_id,user_rating_count) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
Hibernate: insert into session_restaurant (address,category,current_opening_hours,generative_summary,like_count,name,price_level,price_range,provider_id,rating,review_summary,round,session_id,user_rating_count) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
Hibernate: insert into session_restaurant (address,category,current_opening_hours,generative_summary,like_count,name,price_level,price_range,provider_id,rating,review_summary,round,session_id,user_rating_count) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
Hibernate: insert into session_restaurant (address,category,current_opening_hours,generative_summary,like_count,name,price_level,price_range,provider_id,rating,review_summary,round,session_id,user_rating_count) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
Hibernate: insert into session_participant (joined_at,session_id,user_id) values (?,?,?)
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 16, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 16, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Creating new UserVoteQuota for sessionId: 16, userId: decainw1, round: 1
DEBUG: Session likesPerUser: 2, calculated maxVotes: 2 for round 1
Hibernate: insert into user_vote_quota (created_at,round,session_id,total_allowed,updated_at,user_id,votes_used) values (?,?,?,?,?,?,?)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
DEBUG: Created UserVoteQuota with ID: 27, maxVotes: 2, votesUsed: 0, remaining: 2
DEBUG: User decainw1 has 2 remaining votes (used: 0/2)
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 16, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 16, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 27, maxVotes: 2, votesUsed: 0, remaining: 2
DEBUG: User decainw1 has 2 remaining votes (used: 0/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 16, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 16, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 27, maxVotes: 2, votesUsed: 0, remaining: 2
DEBUG: User decainw1 has 2 remaining votes (used: 0/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 16, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 16, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 27, maxVotes: 2, votesUsed: 0, remaining: 2
DEBUG: User decainw1 has 2 remaining votes (used: 0/2)
JWT Auth for vote request - User: decainw1, URI: /api/sessions/16/restaurants/ChIJm9ZmFPtYwokR4GjMlk_y7Fg/vote
DEBUG: Vote endpoint called - sessionId: 16, providerId: ChIJm9ZmFPtYwokR4GjMlk_y7Fg, principal: decainw1
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=?
DEBUG: processVote called - sessionId: 16, userId: decainw1, providerId: ChIJm9ZmFPtYwokR4GjMlk_y7Fg, voteType: LIKE, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 16, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 27, maxVotes: 2, votesUsed: 0, remaining: 2
DEBUG: Current quota before vote - votesUsed: 0, totalAllowed: 2, canVote: true
Hibernate: select svh1_0.id,svh1_0.created_at,svh1_0.provider_id,svh1_0.round,svh1_0.session_id,svh1_0.user_id,svh1_0.vote_type from session_vote_history svh1_0 where svh1_0.session_id=? and svh1_0.user_id=? and svh1_0.provider_id=? and svh1_0.round=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=?
DEBUG: Processing LIKE vote - incrementing quota
DEBUG: Quota after LIKE vote - votesUsed: 1, totalAllowed: 2
Hibernate: insert into session_vote_history (created_at,provider_id,round,session_id,user_id,vote_type) values (?,?,?,?,?,?)
DEBUG: Vote processed successfully
Hibernate: update session_restaurant set address=?,category=?,current_opening_hours=?,generative_summary=?,like_count=?,name=?,price_level=?,price_range=?,provider_id=?,rating=?,review_summary=?,round=?,session_id=?,user_rating_count=? where id=?
Hibernate: update user_vote_quota set created_at=?,round=?,session_id=?,total_allowed=?,updated_at=?,user_id=?,votes_used=? where id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 16, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 16, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 27, maxVotes: 2, votesUsed: 1, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 1/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 16, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 16, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 27, maxVotes: 2, votesUsed: 1, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 1/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 16, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 16, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 27, maxVotes: 2, votesUsed: 1, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 1/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 16, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 16, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 27, maxVotes: 2, votesUsed: 1, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 1/2)
JWT Auth for vote request - User: decainw1, URI: /api/sessions/16/restaurants/ChIJKy5pv_RYwokRBaqWbokKqOc/vote
DEBUG: Vote endpoint called - sessionId: 16, providerId: ChIJKy5pv_RYwokRBaqWbokKqOc, principal: decainw1
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=?
DEBUG: processVote called - sessionId: 16, userId: decainw1, providerId: ChIJKy5pv_RYwokRBaqWbokKqOc, voteType: LIKE, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 16, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 27, maxVotes: 2, votesUsed: 1, remaining: 1
DEBUG: Current quota before vote - votesUsed: 1, totalAllowed: 2, canVote: true
Hibernate: select svh1_0.id,svh1_0.created_at,svh1_0.provider_id,svh1_0.round,svh1_0.session_id,svh1_0.user_id,svh1_0.vote_type from session_vote_history svh1_0 where svh1_0.session_id=? and svh1_0.user_id=? and svh1_0.provider_id=? and svh1_0.round=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=?
DEBUG: Processing LIKE vote - incrementing quota
DEBUG: Quota after LIKE vote - votesUsed: 2, totalAllowed: 2
Hibernate: insert into session_vote_history (created_at,provider_id,round,session_id,user_id,vote_type) values (?,?,?,?,?,?)
DEBUG: Vote processed successfully
Hibernate: update session_restaurant set address=?,category=?,current_opening_hours=?,generative_summary=?,like_count=?,name=?,price_level=?,price_range=?,provider_id=?,rating=?,review_summary=?,round=?,session_id=?,user_rating_count=? where id=?
Hibernate: update user_vote_quota set created_at=?,round=?,session_id=?,total_allowed=?,updated_at=?,user_id=?,votes_used=? where id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 16, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 16, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 27, maxVotes: 2, votesUsed: 2, remaining: 0
DEBUG: User decainw1 has 0 remaining votes (used: 2/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 16, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 16, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 27, maxVotes: 2, votesUsed: 2, remaining: 0
DEBUG: User decainw1 has 0 remaining votes (used: 2/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select count(sp1_0.id) from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=? order by sr1_0.like_count desc
Hibernate: insert into session_restaurant (address,category,current_opening_hours,generative_summary,like_count,name,price_level,price_range,provider_id,rating,review_summary,round,session_id,user_rating_count) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
Hibernate: insert into session_restaurant (address,category,current_opening_hours,generative_summary,like_count,name,price_level,price_range,provider_id,rating,review_summary,round,session_id,user_rating_count) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
Hibernate: insert into session_restaurant (address,category,current_opening_hours,generative_summary,like_count,name,price_level,price_range,provider_id,rating,review_summary,round,session_id,user_rating_count) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
Hibernate: update session set created_at=?,creator_id=?,join_code=?,likes_per_user=?,pool_size=?,round=?,round_time=?,status=? where id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 16, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 16, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Creating new UserVoteQuota for sessionId: 16, userId: decainw1, round: 2
DEBUG: Session likesPerUser: 2, calculated maxVotes: 1 for round 2
Hibernate: insert into user_vote_quota (created_at,round,session_id,total_allowed,updated_at,user_id,votes_used) values (?,?,?,?,?,?,?)
DEBUG: Created UserVoteQuota with ID: 28, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
Hibernate: select u1_0.id,u1_0.avatar_url,u1_0.created_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.provider,u1_0.provider_id,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
Hibernate: select fa1_0.user_id,fa1_0.food_allergies from user_food_allergies fa1_0 where fa1_0.user_id=?
Hibernate: select dp1_0.user_id,dp1_0.dietary_preferences from user_dietary_preferences dp1_0 where dp1_0.user_id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 16, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 16, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 28, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 16, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 16, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 28, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
Timer already running for session 16 round 1, skipping duplicate
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 16, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 16, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 28, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 16, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 16, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 28, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 16, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 16, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 28, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 16, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 16, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 28, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 16, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 16, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 28, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
JWT Auth for vote request - User: decainw1, URI: /api/sessions/16/restaurants/ChIJm9ZmFPtYwokR4GjMlk_y7Fg/vote
DEBUG: Vote endpoint called - sessionId: 16, providerId: ChIJm9ZmFPtYwokR4GjMlk_y7Fg, principal: decainw1
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=?
DEBUG: processVote called - sessionId: 16, userId: decainw1, providerId: ChIJm9ZmFPtYwokR4GjMlk_y7Fg, voteType: LIKE, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 16, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 28, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: Current quota before vote - votesUsed: 0, totalAllowed: 1, canVote: true
Hibernate: select svh1_0.id,svh1_0.created_at,svh1_0.provider_id,svh1_0.round,svh1_0.session_id,svh1_0.user_id,svh1_0.vote_type from session_vote_history svh1_0 where svh1_0.session_id=? and svh1_0.user_id=? and svh1_0.provider_id=? and svh1_0.round=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=?
DEBUG: Processing LIKE vote - incrementing quota
DEBUG: Quota after LIKE vote - votesUsed: 1, totalAllowed: 1
Hibernate: insert into session_vote_history (created_at,provider_id,round,session_id,user_id,vote_type) values (?,?,?,?,?,?)
DEBUG: Vote processed successfully
Hibernate: update session_restaurant set address=?,category=?,current_opening_hours=?,generative_summary=?,like_count=?,name=?,price_level=?,price_range=?,provider_id=?,rating=?,review_summary=?,round=?,session_id=?,user_rating_count=? where id=?
Hibernate: update user_vote_quota set created_at=?,round=?,session_id=?,total_allowed=?,updated_at=?,user_id=?,votes_used=? where id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 16, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 16, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 28, maxVotes: 1, votesUsed: 1, remaining: 0
DEBUG: User decainw1 has 0 remaining votes (used: 1/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 16, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 16, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 28, maxVotes: 1, votesUsed: 1, remaining: 0
DEBUG: User decainw1 has 0 remaining votes (used: 1/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=? order by sr1_0.like_count desc
Hibernate: update session set created_at=?,creator_id=?,join_code=?,likes_per_user=?,pool_size=?,round=?,round_time=?,status=? where id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select u1_0.id,u1_0.avatar_url,u1_0.created_at,u1_0.email,u1_0.email_verified,u1_0.enabled,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.provider,u1_0.provider_id,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
Hibernate: select fa1_0.user_id,fa1_0.food_allergies from user_food_allergies fa1_0 where fa1_0.user_id=?
Hibernate: select dp1_0.user_id,dp1_0.dietary_preferences from user_dietary_preferences dp1_0 where dp1_0.user_id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 16, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 16, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 28, maxVotes: 1, votesUsed: 1, remaining: 0
DEBUG: User decainw1 has 0 remaining votes (used: 1/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 16, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 16, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 28, maxVotes: 1, votesUsed: 1, remaining: 0
DEBUG: User decainw1 has 0 remaining votes (used: 1/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.join_code=?
Hibernate: insert into session (created_at,creator_id,join_code,likes_per_user,pool_size,round,round_time,status) values (?,?,?,?,?,?,?,?)
Hibernate: insert into session_restaurant (address,category,current_opening_hours,generative_summary,like_count,name,price_level,price_range,provider_id,rating,review_summary,round,session_id,user_rating_count) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
Hibernate: insert into session_restaurant (address,category,current_opening_hours,generative_summary,like_count,name,price_level,price_range,provider_id,rating,review_summary,round,session_id,user_rating_count) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
Hibernate: insert into session_restaurant (address,category,current_opening_hours,generative_summary,like_count,name,price_level,price_range,provider_id,rating,review_summary,round,session_id,user_rating_count) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
Hibernate: insert into session_restaurant (address,category,current_opening_hours,generative_summary,like_count,name,price_level,price_range,provider_id,rating,review_summary,round,session_id,user_rating_count) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
Hibernate: insert into session_participant (joined_at,session_id,user_id) values (?,?,?)
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 17, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 1
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Creating new UserVoteQuota for sessionId: 17, userId: decainw1, round: 1
DEBUG: Session likesPerUser: 2, calculated maxVotes: 2 for round 1
Hibernate: insert into user_vote_quota (created_at,round,session_id,total_allowed,updated_at,user_id,votes_used) values (?,?,?,?,?,?,?)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
DEBUG: Created UserVoteQuota with ID: 29, maxVotes: 2, votesUsed: 0, remaining: 2
DEBUG: User decainw1 has 2 remaining votes (used: 0/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 17, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 29, maxVotes: 2, votesUsed: 0, remaining: 2
DEBUG: User decainw1 has 2 remaining votes (used: 0/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 17, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 29, maxVotes: 2, votesUsed: 0, remaining: 2
DEBUG: User decainw1 has 2 remaining votes (used: 0/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 17, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 29, maxVotes: 2, votesUsed: 0, remaining: 2
DEBUG: User decainw1 has 2 remaining votes (used: 0/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 17, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 29, maxVotes: 2, votesUsed: 0, remaining: 2
DEBUG: User decainw1 has 2 remaining votes (used: 0/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 17, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 29, maxVotes: 2, votesUsed: 0, remaining: 2
DEBUG: User decainw1 has 2 remaining votes (used: 0/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 17, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 29, maxVotes: 2, votesUsed: 0, remaining: 2
DEBUG: User decainw1 has 2 remaining votes (used: 0/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 17, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 29, maxVotes: 2, votesUsed: 0, remaining: 2
DEBUG: User decainw1 has 2 remaining votes (used: 0/2)
JWT Auth for vote request - User: decainw1, URI: /api/sessions/17/restaurants/ChIJKy5pv_RYwokRBaqWbokKqOc/vote
DEBUG: Vote endpoint called - sessionId: 17, providerId: ChIJKy5pv_RYwokRBaqWbokKqOc, principal: decainw1
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=?
DEBUG: processVote called - sessionId: 17, userId: decainw1, providerId: ChIJKy5pv_RYwokRBaqWbokKqOc, voteType: LIKE, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 29, maxVotes: 2, votesUsed: 0, remaining: 2
DEBUG: Current quota before vote - votesUsed: 0, totalAllowed: 2, canVote: true
Hibernate: select svh1_0.id,svh1_0.created_at,svh1_0.provider_id,svh1_0.round,svh1_0.session_id,svh1_0.user_id,svh1_0.vote_type from session_vote_history svh1_0 where svh1_0.session_id=? and svh1_0.user_id=? and svh1_0.provider_id=? and svh1_0.round=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=?
DEBUG: Processing LIKE vote - incrementing quota
DEBUG: Quota after LIKE vote - votesUsed: 1, totalAllowed: 2
Hibernate: insert into session_vote_history (created_at,provider_id,round,session_id,user_id,vote_type) values (?,?,?,?,?,?)
DEBUG: Vote processed successfully
Hibernate: update session_restaurant set address=?,category=?,current_opening_hours=?,generative_summary=?,like_count=?,name=?,price_level=?,price_range=?,provider_id=?,rating=?,review_summary=?,round=?,session_id=?,user_rating_count=? where id=?
Hibernate: update user_vote_quota set created_at=?,round=?,session_id=?,total_allowed=?,updated_at=?,user_id=?,votes_used=? where id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 17, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 29, maxVotes: 2, votesUsed: 1, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 1/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 17, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 29, maxVotes: 2, votesUsed: 1, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 1/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 17, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 29, maxVotes: 2, votesUsed: 1, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 1/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 17, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 29, maxVotes: 2, votesUsed: 1, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 1/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 17, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 29, maxVotes: 2, votesUsed: 1, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 1/2)
JWT Auth for vote request - User: decainw1, URI: /api/sessions/17/restaurants/ChIJNRe1Mf9YwokRvxBdos5UEY4/vote
DEBUG: Vote endpoint called - sessionId: 17, providerId: ChIJNRe1Mf9YwokRvxBdos5UEY4, principal: decainw1
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=?
DEBUG: processVote called - sessionId: 17, userId: decainw1, providerId: ChIJNRe1Mf9YwokRvxBdos5UEY4, voteType: LIKE, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 29, maxVotes: 2, votesUsed: 1, remaining: 1
DEBUG: Current quota before vote - votesUsed: 1, totalAllowed: 2, canVote: true
Hibernate: select svh1_0.id,svh1_0.created_at,svh1_0.provider_id,svh1_0.round,svh1_0.session_id,svh1_0.user_id,svh1_0.vote_type from session_vote_history svh1_0 where svh1_0.session_id=? and svh1_0.user_id=? and svh1_0.provider_id=? and svh1_0.round=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=?
DEBUG: Processing LIKE vote - incrementing quota
DEBUG: Quota after LIKE vote - votesUsed: 2, totalAllowed: 2
Hibernate: insert into session_vote_history (created_at,provider_id,round,session_id,user_id,vote_type) values (?,?,?,?,?,?)
DEBUG: Vote processed successfully
Hibernate: update session_restaurant set address=?,category=?,current_opening_hours=?,generative_summary=?,like_count=?,name=?,price_level=?,price_range=?,provider_id=?,rating=?,review_summary=?,round=?,session_id=?,user_rating_count=? where id=?
Hibernate: update user_vote_quota set created_at=?,round=?,session_id=?,total_allowed=?,updated_at=?,user_id=?,votes_used=? where id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 17, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 29, maxVotes: 2, votesUsed: 2, remaining: 0
DEBUG: User decainw1 has 0 remaining votes (used: 2/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 17, currentRound: 1
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 1
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 29, maxVotes: 2, votesUsed: 2, remaining: 0
DEBUG: User decainw1 has 0 remaining votes (used: 2/2)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select count(sp1_0.id) from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=? order by sr1_0.like_count desc
Hibernate: insert into session_restaurant (address,category,current_opening_hours,generative_summary,like_count,name,price_level,price_range,provider_id,rating,review_summary,round,session_id,user_rating_count) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
Hibernate: insert into session_restaurant (address,category,current_opening_hours,generative_summary,like_count,name,price_level,price_range,provider_id,rating,review_summary,round,session_id,user_rating_count) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
Hibernate: insert into session_restaurant (address,category,current_opening_hours,generative_summary,like_count,name,price_level,price_range,provider_id,rating,review_summary,round,session_id,user_rating_count) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
Hibernate: update session set created_at=?,creator_id=?,join_code=?,likes_per_user=?,pool_size=?,round=?,round_time=?,status=? where id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 17, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Creating new UserVoteQuota for sessionId: 17, userId: decainw1, round: 2
DEBUG: Session likesPerUser: 2, calculated maxVotes: 1 for round 2
Hibernate: insert into user_vote_quota (created_at,round,session_id,total_allowed,updated_at,user_id,votes_used) values (?,?,?,?,?,?,?)
DEBUG: Created UserVoteQuota with ID: 30, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 17, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 30, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 17, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 30, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 17, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 30, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 17, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 30, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 17, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 30, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 17, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 30, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 17, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 30, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: User decainw1 has 1 remaining votes (used: 0/1)
JWT Auth for vote request - User: decainw1, URI: /api/sessions/17/restaurants/ChIJNRe1Mf9YwokRvxBdos5UEY4/vote
DEBUG: Vote endpoint called - sessionId: 17, providerId: ChIJNRe1Mf9YwokRvxBdos5UEY4, principal: decainw1
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=?
DEBUG: processVote called - sessionId: 17, userId: decainw1, providerId: ChIJNRe1Mf9YwokRvxBdos5UEY4, voteType: LIKE, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 30, maxVotes: 1, votesUsed: 0, remaining: 1
DEBUG: Current quota before vote - votesUsed: 0, totalAllowed: 1, canVote: true
Hibernate: select svh1_0.id,svh1_0.created_at,svh1_0.provider_id,svh1_0.round,svh1_0.session_id,svh1_0.user_id,svh1_0.vote_type from session_vote_history svh1_0 where svh1_0.session_id=? and svh1_0.user_id=? and svh1_0.provider_id=? and svh1_0.round=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=?
DEBUG: Processing LIKE vote - incrementing quota
DEBUG: Quota after LIKE vote - votesUsed: 1, totalAllowed: 1
Hibernate: insert into session_vote_history (created_at,provider_id,round,session_id,user_id,vote_type) values (?,?,?,?,?,?)
DEBUG: Vote processed successfully
Hibernate: update session_restaurant set address=?,category=?,current_opening_hours=?,generative_summary=?,like_count=?,name=?,price_level=?,price_range=?,provider_id=?,rating=?,review_summary=?,round=?,session_id=?,user_rating_count=? where id=?
Hibernate: update user_vote_quota set created_at=?,round=?,session_id=?,total_allowed=?,updated_at=?,user_id=?,votes_used=? where id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=? and sp1_0.user_id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 17, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 30, maxVotes: 1, votesUsed: 1, remaining: 0
DEBUG: User decainw1 has 0 remaining votes (used: 1/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 17, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 30, maxVotes: 1, votesUsed: 1, remaining: 0
DEBUG: User decainw1 has 0 remaining votes (used: 1/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 17, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 30, maxVotes: 1, votesUsed: 1, remaining: 0
DEBUG: User decainw1 has 0 remaining votes (used: 1/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
DEBUG: getRemainingLikes called - userId: decainw1, sessionId: 17, currentRound: 2
DEBUG: ensureUserVoteQuota called - sessionId: 17, userId: decainw1, round: 2
Hibernate: select uvq1_0.id,uvq1_0.created_at,uvq1_0.round,uvq1_0.session_id,uvq1_0.total_allowed,uvq1_0.updated_at,uvq1_0.user_id,uvq1_0.votes_used from user_vote_quota uvq1_0 where uvq1_0.session_id=? and uvq1_0.user_id=? and uvq1_0.round=?
DEBUG: Found existing UserVoteQuota - ID: 30, maxVotes: 1, votesUsed: 1, remaining: 0
DEBUG: User decainw1 has 0 remaining votes (used: 1/1)
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=? and sr1_0.round=? order by sr1_0.like_count desc
Hibernate: update session set created_at=?,creator_id=?,join_code=?,likes_per_user=?,pool_size=?,round=?,round_time=?,status=? where id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=?
Hibernate: select sp1_0.id,sp1_0.joined_at,sp1_0.session_id,sp1_0.user_id from session_participant sp1_0 left join session s1_0 on s1_0.id=sp1_0.session_id where s1_0.id=?
Hibernate: select s1_0.id,s1_0.created_at,s1_0.creator_id,s1_0.join_code,s1_0.likes_per_user,s1_0.pool_size,s1_0.round,s1_0.round_time,s1_0.status from session s1_0 where s1_0.id=?
Hibernate: select sr1_0.id,sr1_0.address,sr1_0.category,sr1_0.current_opening_hours,sr1_0.generative_summary,sr1_0.like_count,sr1_0.name,sr1_0.price_level,sr1_0.price_range,sr1_0.provider_id,sr1_0.rating,sr1_0.review_summary,sr1_0.round,sr1_0.session_id,sr1_0.user_rating_count from session_restaurant sr1_0 where sr1_0.session_id=?
